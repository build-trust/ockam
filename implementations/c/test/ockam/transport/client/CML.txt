cmake_minimum_required(VERSION 3.15)
###########
# Project #
###########

###########################
# Path & Compiler Options #
###########################

# Always load the path.cmake file FIRST
#include($ENV{OCKAM_C_BASE}/tools/cmake/path.cmake)

project(transport_client_test C)

# This must be included BEFORE the project declaration
#if($ENV{PLATFORM} MATCHES "PI")
#	message("Building for PI")
#	include(${OCKAM_C_BASE}/tools/cmake/toolchains/raspberry-pi.cmake)
#else()
	set(CMAKE_C_STANDARD 99)
	set(CMAKE_C_FLAGS "-std=c99 -g")
#endif()


###########################
# Set directory locations #
###########################

set(COMMON_OCKAM_SRC_DIR $ENV{OCKAM_C_BASE}/source/ockam)
set(TRANSPORT_TEST_CLIENT_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR})
set(TRANSPORT_POSIX_SRC_DIR ${COMMON_OCKAM_SRC_DIR}/transport)
set(OCKAM_INC_DIR $ENV{OCKAM_C_BASE}/include/)
#set(BINARY_DIR _build/$ENV{PLATFORM})

#################
# Build Options #
#################

###########################
# Set include directories #
###########################

#set(TRANSPORT_TEST_CLIENT_INC ${OCKAM_INC_DIR})

####################
# Set source files #
####################

set(TEST_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/transport_client_test.c
	${COMMON_OCKAM_SRC_DIR}/log/syslog.c)

#set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${BINARY_DIR})

###########################
# Set the desired modules #
###########################

#add_subdirectory(${TRANSPORT_POSIX_SRC_DIR} ${BINARY_DIR})

#########################################
# Configure link libraries & executable #
#########################################

#link_directories(${CMAKE_CURRENT_SOURCE_DIR}/${BINARY_DIR})
add_executable(transport_client_test ${TEST_SRC})
#target_link_libraries(transport_client_test ockam_transport)

#install(TARGETS transport_client_test DESTINATION bin)

#####################################################


# Get the headers
#include_directories( "./include/"
#		${OCKAM_INC_DIR}
#		$ENV{OCKAM_C_BASE}/source/ockam/transport/include/ )

# Add the source files
#file(GLOB SOURCES "./*.c"
#		$ENV{OCKAM_C_BASE}/source/ockam/queue/*.c
#		$ENV{OCKAM_C_BASE}/source/ockam/log/*.c
#		$ENV{OCKAM_C_BASE}/source/ockam/transport/server/*.c
#		$ENV{OCKAM_C_BASE}/source/ockam/transport/*.c
#		$ENV{OCKAM_C_BASE}/source/ockam/transport/connection/*.c
#		$ENV{OCKAM_C_BASE}/source/ockam/transport/connection/socket/posix/*.c )


#add_executable(transport_client_test ${SOURCES})
